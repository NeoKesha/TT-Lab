<UserControl
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:i="http://schemas.microsoft.com/xaml/behaviors"
        xmlns:cal="clr-namespace:Caliburn.Micro;assembly=Caliburn.Micro.Platform"
        xmlns:code="clr-namespace:TT_Lab.ViewModels.Editors.Code"
        xmlns:controls="clr-namespace:TT_Lab.Controls"
        xmlns:valueConverters="clr-namespace:TT_Lab.ValueConverters"
        x:Class="TT_Lab.Views.Editors.Code.AnimationView"
        d:DataContext="{Binding Source={d:DesignInstance code:AnimationViewModel}}"
        mc:Ignorable="d"
        d:DesignHeight="600" d:DesignWidth="800">
    <UserControl.Resources>
        <valueConverters:LabUriConverter x:Key="UriConverter"/>
    </UserControl.Resources>
    <GroupBox>
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="4*"/>
                <RowDefinition Height="2*"/>
            </Grid.RowDefinitions>
            <ContentControl Grid.Row="0" Margin="5" x:Name="AnimationScene"/>
            <StackPanel Margin="5" Grid.Row="1" Orientation="Vertical">
                <controls:LabeledDropList SelectedItem="{Binding SelectedOgi}" Items="{Binding SuitableModels}" x:Name="ObjectList" HorizontalAlignment="Stretch" Margin="5" VerticalAlignment="Stretch" DropListName="Model Picker" AllowDrop="True">
                    <controls:LabeledDropList.ItemTemplate>
                        <DataTemplate>
                            <TextBlock Text="{Binding Converter={StaticResource UriConverter}}"/>
                        </DataTemplate>
                    </controls:LabeledDropList.ItemTemplate>
                </controls:LabeledDropList>
                <Grid Margin="5">
                    <Grid.RowDefinitions>
                        <RowDefinition></RowDefinition>
                        <RowDefinition></RowDefinition>
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition></ColumnDefinition>
                        <ColumnDefinition></ColumnDefinition>
                    </Grid.ColumnDefinitions>
                    <Slider x:Name="AnimationTrack"
                            Value="{Binding CurrentAnimationFrame}"
                            Margin="0, 0, 0, 5"
                            TickFrequency="1"
                            Minimum="0"
                            Maximum="{Binding TotalFrames}"
                            TickPlacement="Both"
                            Grid.Column="0" Grid.ColumnSpan="2" Grid.Row="0">
                        <i:Interaction.Triggers>
                            <i:EventTrigger EventName="ValueChanged">
                                <cal:ActionMessage MethodName="ChangeTrackPosition">
                                    <cal:Parameter Value="$eventArgs"/>
                                </cal:ActionMessage>
                            </i:EventTrigger>
                        </i:Interaction.Triggers>
                    </Slider>
                    <TextBlock x:Name="CurrentAnimationFrame" Margin="0, 0, 0, 5" Grid.Column="0" Grid.Row="1" Text="0"></TextBlock>
                    <TextBlock x:Name="TotalFrames" Margin="0, 0, 0, 5" Grid.Column="1" Grid.Row="1" Text="0" TextAlignment="Right"></TextBlock>
                </Grid>
                <UniformGrid Columns="4">
                    <controls:LabeledTextBox Text="{Binding PlaybackFps}" TextBoxName="Playback FPS" Margin="5" HorizontalAlignment="Stretch"/>
                    <controls:LabeledCheckBox Checked="{Binding Loop}" HorizontalAlignment="Left" CheckBoxName="Loop" LayoutOrientation="Vertical"/>
                    <Button HorizontalAlignment="Stretch" Margin="5" x:Name="PlayAnimation" Content="Play"></Button>
                    <Button HorizontalAlignment="Stretch" Margin="5" x:Name="PauseAnimation" Content="Pause"></Button>
                </UniformGrid>
            </StackPanel>
        </Grid>
    </GroupBox>
</UserControl>
